(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{101:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var a=n(108),r=n.n(a),c={apiKey:"AIzaSyADqCDhsveXOBdlRF0GXU1UPF3DSP1o_GQ",authDomain:"xautolab.firebaseapp.com",databaseURL:"https://xautolab.firebaseio.com",projectId:"xautolab",storageBucket:"xautolab.appspot.com",messagingSenderId:"293995197851",appId:"1:293995197851:web:4e642710f3771743c09d3e",measurementId:"G-GF5LQCYK69"};n(111),n(112),r.a.initializeApp(c);var o=r.a.firestore(),i=o.collection("products"),s=r.a.auth();t.c=o},105:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}},106:function(e,t,n){e.exports=n(120)},107:function(e,t){function n(e,t,n,a,r,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,r)}e.exports=function(e){return function(){var t=this,a=arguments;return new Promise((function(r,c){var o=e.apply(t,a);function i(e){n(o,r,c,i,s,"next",e)}function s(e){n(o,r,c,i,s,"throw",e)}i(void 0)}))}}},114:function(e,t,n){},115:function(e,t,n){var a=n(116),r=n(117),c=n(118),o=n(119);e.exports=function(e){return a(e)||r(e)||c(e)||o()}},116:function(e,t,n){var a=n(105);e.exports=function(e){if(Array.isArray(e))return a(e)}},117:function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},118:function(e,t,n){var a=n(105);e.exports=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}},119:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},120:function(e,t,n){var a=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,n){return e[t]=n}}function s(e,t,n,a){var r=t&&t.prototype instanceof m?t:m,c=Object.create(r.prototype),o=new x(a||[]);return c._invoke=function(e,t,n){var a="suspendedStart";return function(r,c){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw c;return C()}for(n.method=r,n.arg=c;;){var o=n.delegate;if(o){var i=E(o,n);if(i){if(i===u)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=l(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),c}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function m(){}function p(){}function d(){}var h={};h[r]=function(){return this};var f=Object.getPrototypeOf,v=f&&f(f(P([])));v&&v!==t&&n.call(v,r)&&(h=v);var g=d.prototype=m.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var a;this._invoke=function(r,c){function o(){return new t((function(a,o){!function a(r,c,o,i){var s=l(e[r],e,c);if("throw"!==s.type){var u=s.arg,m=u.value;return m&&"object"==typeof m&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){a("next",e,o,i)}),(function(e){a("throw",e,o,i)})):t.resolve(m).then((function(e){u.value=e,o(u)}),(function(e){return a("throw",e,o,i)}))}i(s.arg)}(r,c,a,o)}))}return a=a?a.then(o,o):o()}}function E(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=l(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function P(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,c=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return c.next=c}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=g.constructor=d,d.constructor=p,p.displayName=i(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),b.prototype[c]=function(){return this},e.AsyncIterator=b,e.async=function(t,n,a,r,c){void 0===c&&(c=Promise);var o=new b(s(t,n,a,r),c);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(g),i(g,o,"Generator"),g[r]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=P,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return o.type="throw",o.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],o=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),s=n.call(c,"finallyLoc");if(i&&s){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var c=r;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var o=c?c.completion:{};return o.type=e,o.arg=t,c?(this.method="next",this.next=c.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;w(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=a}catch(e){Function("r","regeneratorRuntime = r")(a)}},121:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var a=n(13),r=n.n(a),c=n(14),o=n.n(c),i=n(15),s=n.n(i),l=n(16),u=n.n(l),m=n(10),p=n.n(m),d=n(0),h=n.n(d),f=n(21),v=(n(114),function(e){var t=e.title,n=e.subtitle;return h.a.createElement("header",{className:"subpage-header"},h.a.createElement("h2",{className:"title has-text-weight-normal is-size-3 is-capitalized has-text-secondary subpage-header__title has-text-white"},t),h.a.createElement("h3",{className:"subtitle is-size-5 subpage-header__subtitle has-text-white"},n))}),g=n(3),y=n(2),b=n(115),E=n.n(b),N=n(106),w=n.n(N),x=n(107),P=n.n(x),C=n(18),k=n.n(C),O=n(4),F=n.n(O),L=(n(121),n(101)),S=n(31);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var R=function(e){s()(n,e);var t=j(n);function n(){var e,a;r()(this,n);for(var c=arguments.length,o=new Array(c),i=0;i<c;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),F()(k()(e),"state",{name:"",price:"",pictures:[],tags:[],color:"",discount:0,category:"overall",subprice:"",description:"",isActive:!0,tag:"",picture:""}),F()(k()(e),"handleFormChange",(function(t){e.setState(F()({},t.currentTarget.name,t.currentTarget.value))})),F()(k()(e),"handleFormClear",(function(){e.setState({name:"",price:"",pictures:[],tags:[],color:"",discount:0,category:"",description:"",subprice:"",isActive:!0,tag:"",picture:""}),e.props.history.push("/admin/products/list")})),F()(k()(e),"handleFormSubmit",(a=P()(w.a.mark((function t(n){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!(a=e.props.match.params.productId)){t.next=14;break}return t.prev=3,t.next=6,L.b.doc(a).set({name:e.state.name,price:parseInt(e.state.price),pictures:e.state.pictures,tags:e.state.tags,color:e.state.color,discount:parseInt(e.state.discount),category:e.state.category,subprice:e.state.subprice,description:e.state.description,isActive:"true"===e.state.isActive});case 6:e.handleFormClear(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0);case 12:t.next=23;break;case 14:return t.prev=14,t.next=17,L.b.add({name:e.state.name,price:parseInt(e.state.price),pictures:e.state.pictures,tags:e.state.tags,color:e.state.color,discount:parseInt(e.state.discount),category:e.state.category,subprice:e.state.subprice,description:e.state.description,isActive:"true"===e.state.isActive});case 17:e.handleFormClear(),t.next=23;break;case 20:t.prev=20,t.t1=t.catch(14),console.log(t.t1);case 23:case"end":return t.stop()}}),t,null,[[3,9],[14,20]])}))),function(e){return a.apply(this,arguments)})),F()(k()(e),"handleTagAdd",(function(t){t.preventDefault(),e.setState((function(t){return{tags:[].concat(E()(t.tags),[e.state.tag]),tag:""}}))})),F()(k()(e),"handlePictureAdd",(function(t){t.preventDefault(),e.setState((function(e){return{picture:"",pictures:[].concat(E()(e.pictures),[e.picture])}}))})),F()(k()(e),"handlePictureRemove",(function(t){e.setState((function(e){return{pictures:E()(e.pictures.filter((function(e){return e!==t})))}}))})),F()(k()(e),"renderTags",(function(){return e.state.tags.map((function(t){return h.a.createElement("span",{className:"tag is-warning",key:t},t,h.a.createElement("button",{className:"delete is-small",onClick:function(){return e.handleTagRemove(t)}}))}))})),F()(k()(e),"handleTagRemove",(function(t){e.setState((function(e){return{tags:E()(e.tags.filter((function(e){return e!==t})))}}))})),F()(k()(e),"renderPicturesLinks",(function(){return e.state.pictures.map((function(t){return h.a.createElement("span",{className:"tag is-warning",key:t},t,h.a.createElement("button",{className:"delete is-small",onClick:function(){return e.handlePictureRemove(t)}}))}))})),e}return o()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.productId;t&&L.b.doc(t).get().then((function(t){var n=t.data();e.setState({name:n.name,price:n.price,pictures:n.pictures,tags:n.tags,color:n.color,discount:n.discount,category:n.category,subprice:n.subprice,description:n.description,isActive:"true"})}))}},{key:"render",value:function(){var e=this.props.match.params.productId;return h.a.createElement("form",{className:"product-edit-form",onSubmit:this.handleFormSubmit},h.a.createElement("h2",{className:"title has-text-white"},e?"Изменяемый товар: ".concat(e):"Добавить новый товар"),h.a.createElement("div",{className:"field"},h.a.createElement("label",{htmlFor:"name",className:"label"},"Название"),h.a.createElement("div",{className:"control"},h.a.createElement("input",{value:this.state.name,onChange:this.handleFormChange,className:"input",name:"name",id:"name",type:"text",placeholder:"Название товара"}))),h.a.createElement("div",{className:"field"},h.a.createElement("label",{htmlFor:"subprice",className:"label"},"До цены"),h.a.createElement("div",{className:"control"},h.a.createElement("input",{value:this.state.subprice,onChange:this.handleFormChange,className:"input",name:"subprice",id:"subprice",type:"text",placeholder:"до цены (пример: %до цены% %цена%)"}))),h.a.createElement("div",{className:"field"},h.a.createElement("label",{htmlFor:"price",className:"label"},"Цена"),h.a.createElement("div",{className:"control"},h.a.createElement("input",{value:this.state.price,onChange:this.handleFormChange,className:"input",name:"price",id:"price",type:"number",step:"0.1",placeholder:"Цена товара"}))),h.a.createElement("div",{className:"field"},h.a.createElement("label",{className:"label"},"Активность"),h.a.createElement("div",{className:"control"},h.a.createElement("label",{className:"radio has-text-white has-text-weight-bold"},h.a.createElement("input",{onChange:this.handleFormChange,type:"radio",name:"isActive",value:"true",defaultChecked:!0}),"Видимый"),h.a.createElement("label",{className:"radio has-text-white has-text-weight-bold"},h.a.createElement("input",{onChange:this.handleFormChange,type:"radio",name:"isActive",value:"false",defaultChecked:!1}),"Не видимый"))),h.a.createElement("div",{className:"field"},h.a.createElement("label",{htmlFor:"pictures",className:"label"},"URL картинки"),h.a.createElement("div",{className:"control columns"},h.a.createElement("div",{className:"column is-8"},h.a.createElement("input",{value:this.state.picture,onChange:this.handleFormChange,className:"input",name:"picture",id:"picture",type:"text",placeholder:"URL картинки"})),h.a.createElement("div",{className:"column"},h.a.createElement("button",{disabled:""===this.state.picture.trim(),className:"button is-light",onClick:this.handlePictureAdd},"Добавить")))),this.state.pictures.length>0?h.a.createElement(d.Fragment,null,h.a.createElement("p",null,"Добавлено"),h.a.createElement("div",{className:"columns"},h.a.createElement("div",{className:"column"},this.renderPicturesLinks()))):null,h.a.createElement("div",{className:"field"},h.a.createElement("label",{htmlFor:"tag",className:"label"},"Тэги"),h.a.createElement("div",{className:"control columns"},h.a.createElement("div",{className:"column is-8"},h.a.createElement("input",{value:this.state.tag,onChange:this.handleFormChange,className:"input",name:"tag",id:"tag",type:"text",placeholder:"Тэг"})),h.a.createElement("div",{className:"column"},h.a.createElement("button",{disabled:""===this.state.tag.trim(),className:"button is-light",onClick:this.handleTagAdd},"Добавить")))),this.state.tags.length>0?h.a.createElement(d.Fragment,null,h.a.createElement("p",null,"Добавлено"),h.a.createElement("div",{className:"columns"},h.a.createElement("div",{className:"column"},this.renderTags()))):null,h.a.createElement("div",{className:"field"},h.a.createElement("label",{htmlFor:"color",className:"label"},"Цвет (3 цифры)"),h.a.createElement("div",{className:"control"},h.a.createElement("input",{value:this.state.color,onChange:this.handleFormChange,className:"input",name:"color",id:"color",type:"text",placeholder:"Цвет"}))),h.a.createElement("div",{className:"field"},h.a.createElement("label",{htmlFor:"discount",className:"label"},"Скидка"),h.a.createElement("div",{className:"control"},h.a.createElement("input",{value:this.state.discount,onChange:this.handleFormChange,className:"input",name:"discount",id:"discount",type:"number",min:0,placeholder:"Процент скидки"}))),h.a.createElement("div",{className:"field"},h.a.createElement("label",{htmlFor:"category",className:"label"},"Категория"),h.a.createElement("div",{className:"control"},h.a.createElement("div",{className:"select"},h.a.createElement("select",{value:this.state.category,name:"category",id:"category",onChange:this.handleFormChange},Object.keys(S.b).map((function(e,t){return h.a.createElement("option",{value:e,key:t},S.b[e].name)})))))),h.a.createElement("div",{htmlFor:"description",className:"field"},h.a.createElement("label",{className:"label"},"Комментарий к продукту"),h.a.createElement("div",{className:"control"},h.a.createElement("textarea",{value:this.state.description,onChange:this.handleFormChange,name:"description",id:"description",className:"textarea",placeholder:"Комментарий"}))),h.a.createElement("div",{className:"field"},h.a.createElement("div",{className:"field-label"}),h.a.createElement("div",{className:"field-body"},h.a.createElement("div",{className:"field"},h.a.createElement("div",{className:"control"},h.a.createElement("button",{className:"button is-primary button-submit"},e?"Обновить":"Добавить"),h.a.createElement("button",{onClick:this.handleFormClear,className:"button is-danger"},"Закрыть"))))))}}]),n}(d.Component),A=Object(y.f)(R),D=(n(125),n(11)),I=function(e){return function(t){L.a.signInWithEmailAndPassword(e.email,e.password).then((function(){return t(_(e.email))})).then((function(){return t({type:D.b})})).catch((function(e){return t((n=e.message,{type:D.a,payload:{message:n}}));var n}))}},_=function(e){return function(t){t(G(e)),t({type:D.g,payload:{email:e}})}},T=function(){return function(e){L.a.signOut().then(e({type:D.h})).catch((function(e){return console.log(e)}))}},G=function(e){return function(t){L.c.collection("users").doc(e).get().then((function(e){if(e.exists){var n=e.data();t(U(n))}else console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))}},U=function(e){return{type:D.i,payload:{userDetails:e}}};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=function(e,t,n){return{type:D.d,payload:{products:e,pointer:t,lastDoc:n}}},Y=function(){return{type:D.e}},J=function(e){return{type:D.c,payload:{error:e}}};function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var Q=function(e){s()(a,e);var t,n=K(a);function a(e){var t;return r()(this,a),t=n.call(this,e),F()(k()(t),"renderProducts",(function(){return t.props.products.map((function(e){return h.a.createElement("tr",{key:e._id},h.a.createElement("td",null,e.name),h.a.createElement("td",null,e.category),h.a.createElement("td",null,e.price),h.a.createElement("td",null,e.isActive?h.a.createElement("span",{className:"tag is-success"},"Active"):h.a.createElement("span",{className:"tag is-danger"},"Disabled")),h.a.createElement("td",null," ",h.a.createElement(g.b,{className:"button is-warning",to:"/admin/products/edit/".concat(e._id)},"Изменить")))}))})),F()(k()(t),"nextPage",(function(){t.state.paginationItems>t.state.page&&!t.props.isLoading&&(t.state.page+=1,t.props.getProductsNext(t.props.pointer,t.props.lastDoc,t.state.perPage))})),F()(k()(t),"prevPage",(function(){t.state.page>1&&!t.props.isLoading&&(t.state.page-=1,t.props.getProductsPrev(t.props.pointer,t.props.lastDoc,t.state.perPage))})),t.state={error:null,page:1,perPage:5,count:0,paginationItems:1},t}return o()(a,[{key:"componentDidMount",value:(t=P()(w.a.mark((function e(){var t,n,a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=L.b.orderBy("category"),e.next=4,L.b.get();case 4:(n=e.sent).docs.map(function(){var e=P()(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.data()).pictures[0]=n.pictures[0].replace("http://kalukali.pw/","https://194.58.97.125/"),e.next=4,L.b.doc(t.id).set(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a=n.docs.length,r=Math.ceil(a/this.state.perPage),this.props.getProductsNext(t,[],this.state.perPage),this.setState({count:a,paginationItems:r}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),this.setState({error:e.t0});case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.products;return h.a.createElement("div",{className:"products-table-wrapper"},h.a.createElement("header",null,h.a.createElement("h2",{className:"title has-text-white"},"Услуги в магазине"),h.a.createElement("p",{className:"subtitle has-text-white"},"Всего: ",this.state.count)),h.a.createElement("table",{className:"table is-fullwidth"},h.a.createElement("thead",null,h.a.createElement("tr",null,h.a.createElement("th",null,h.a.createElement("p",{title:"Name"},"Название")),h.a.createElement("th",null,h.a.createElement("p",{title:"Category"},"Категория")),h.a.createElement("th",null,h.a.createElement("p",{title:"Price"},"Цена")),h.a.createElement("th",null,h.a.createElement("p",{title:"Status"},"Статус")),h.a.createElement("th",null,h.a.createElement("p",{title:"Action"},"Изменение")))),h.a.createElement("tbody",null,e.length>0?this.renderProducts():null)),h.a.createElement("footer",null,this.props.isLoading?h.a.createElement("div",{className:"has-text-centered"},h.a.createElement("button",{className:"button is-loading"},"Loading"),h.a.createElement("button",{className:"button is-primary is-loading"},"Loading")):h.a.createElement("div",{className:"has-text-centered"},h.a.createElement("button",{className:"button is-active",onClick:this.prevPage},"Назад"),h.a.createElement("button",{className:"button is-primary is-active",onClick:this.nextPage},"Вперед"))))}}]),a}(d.Component),X=Object(f.b)((function(e){return{lastDoc:e.products.lastDoc,products:e.products.products,pointer:e.products.pointer,isLoading:e.products.isLoading}}),(function(e){return{getProductsNext:function(t,n,a){return e(function(e,t,n){return function(a){a(Y()),t.length?e.startAfter(t[t.length-1]).limit(n).get().then((function(t){var n=t.docs.map((function(e){return M({_id:e.id},e.data())}));a(B(n,e,t.docs))})).catch((function(e){return a(J(e))})):e.limit(n).get().then((function(t){var n=t.docs.map((function(e){return M({_id:e.id},e.data())}));a(B(n,e,t.docs))}))}}(t,n,a))},getProductsPrev:function(t,n,a){return e(function(e,t,n){return function(a){a(Y()),t?e.endBefore(t[0]).limitToLast(n).get().then((function(t){var n=t.docs.map((function(e){return M({_id:e.id},e.data())}));a(B(n,e,t.docs))})).catch((function(e){return a(J(e))})):a(J("getProductPrev: lastDoc undefined"))}}(t,n,a))}}}))(Object(y.f)(Q));n(126);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var W=function(e){s()(n,e);var t=q(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"render",value:function(){return h.a.createElement(d.Fragment,null,h.a.createElement("div",{className:"admin-actions "},h.a.createElement("div",{className:"columns"},h.a.createElement("div",{className:"column "},h.a.createElement(g.b,{to:"".concat(this.props.match.path,"/products/add-new"),className:"button is-medium is-success is-fullwidth button-tile"},"Добавить товар")),h.a.createElement("div",{className:"column "},h.a.createElement(g.b,{to:"".concat(this.props.match.path,"/products/list"),className:"button is-medium is-link is-fullwidth button-tile"},"Редактировать товар")),h.a.createElement("div",{className:"column"},h.a.createElement("button",{className:"button is-medium is-danger is-fullwidth button-tile",onClick:this.props.logOutUser},"Выход")))),h.a.createElement("div",{className:"columns "},h.a.createElement("div",{className:"column is-8"},h.a.createElement(y.c,null,h.a.createElement(y.a,{path:"".concat(this.props.match.path,"/products/add-new"),component:A}),h.a.createElement(y.a,{path:"".concat(this.props.match.path,"/products/edit/:productId"),component:A}),h.a.createElement(y.a,{path:"".concat(this.props.match.path,"/products/list"),component:X}),h.a.createElement(y.a,{path:"".concat(this.props.match.path,"/products/delete/:productId"),component:X}))),h.a.createElement("aside",{className:"column is-4"})))}}]),n}(d.Component),$=Object(f.b)((function(e){return{user:e.user}}),(function(e){return{logOutUser:function(){return e(T())}}}))(Object(y.f)(W));function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var V=function(e){s()(n,e);var t=H(n);function n(){var e;r()(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return e=t.call.apply(t,[this].concat(c)),F()(k()(e),"state",{mode:"login",email:"",password:"",message:e.props.message}),e}return o()(n,[{key:"handleFormSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.email,a=t.password;"login"===this.state.mode&&this.props.logInUser({email:n,password:a})}},{key:"handleEmailChange",value:function(e){var t=e.target.value;this.setState({email:t})}},{key:"handlePasswordChange",value:function(e){var t=e.target.value;this.setState({password:t})}},{key:"render",value:function(){var e=this,t=this.props.clearMessage;return h.a.createElement("div",{className:"column is-offset-3 is-6"},this.state.message?h.a.createElement("div",{className:"notification is-warning"},h.a.createElement("button",{className:"delete",onClick:t}),this.state.message):null,h.a.createElement("form",{onSubmit:function(t){return e.handleFormSubmit(t)}},h.a.createElement("div",{className:"field"},h.a.createElement("label",{className:"label has-text-white"},"Почта"),h.a.createElement("div",{className:"control"},h.a.createElement("input",{className:"input",onChange:function(t){return e.handleEmailChange(t)},type:"email",placeholder:"Ваш email"}))),h.a.createElement("div",{className:"field"},h.a.createElement("label",{className:"label has-text-white"},"Пароль"),h.a.createElement("input",{className:"input",type:"password",placeholder:"Ваш пароль",onChange:function(t){return e.handlePasswordChange(t)}})),h.a.createElement("div",{className:"control buttons"},h.a.createElement("input",{type:"submit",value:"Вход",className:"button is-primary is-fullwidth"}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.message!==t.message?{message:e.message}:null}}]),n}(d.Component),Z=Object(f.b)((function(e){return{message:e.info.message}}),(function(e){return{logInUser:function(t){return e(I(t))}}}))(V);function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var te=function(e){s()(n,e);var t=ee(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"render",value:function(){var e=this.props.user.isAdmin;return h.a.createElement("div",null,h.a.createElement("div",{className:"container"},h.a.createElement(v,{title:"Панель администратора"})),h.a.createElement("div",{className:"container"},e?h.a.createElement($,null):h.a.createElement("div",{className:"columns"},h.a.createElement(Z,null))))}}]),n}(d.Component);t.default=Object(f.b)((function(e){return{user:e.user}}))(te)}}]);