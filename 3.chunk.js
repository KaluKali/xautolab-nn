(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{101:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s}));var r=a(108),c=a.n(r),n={apiKey:"AIzaSyADqCDhsveXOBdlRF0GXU1UPF3DSP1o_GQ",authDomain:"xautolab.firebaseapp.com",databaseURL:"https://xautolab.firebaseio.com",projectId:"xautolab",storageBucket:"xautolab.appspot.com",messagingSenderId:"293995197851",appId:"1:293995197851:web:4e642710f3771743c09d3e",measurementId:"G-GF5LQCYK69"};a(111),a(112),c.a.initializeApp(n);var o=c.a.firestore(),i=o.collection("products"),s=c.a.auth();t.c=o},127:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var r=a(13),c=a.n(r),n=a(14),o=a.n(n),i=a(18),s=a.n(i),l=a(15),u=a.n(l),d=a(16),m=a.n(d),p=a(10),f=a.n(p),v=a(4),h=a.n(v),g=a(0),y=a.n(g),E=a(2),b=(a(127),a(31)),N=function(e){var t=e.title;return y.a.createElement("header",{className:"category-header"},y.a.createElement("h2",{className:"title is-size-3 has-text-secondary has-text-weight-normal category-title is-family-primary has-text-white"},"Товары в категории ",y.a.createElement("span",{className:"category-name"},t?b.b[t].name:"")))},_=a(6),w=a(128),k=a(129),O=(a(130),a(131),function(e){var t=e.discount;return y.a.createElement("div",{className:"discount-info has-background-danger has-text-white is-uppercase has-text-weight-bold"},"- ".concat(t,"%"))}),P=function(e){var t=e.noActionFooter,a=e.noOverlayLink,r=e.additionalClasses,c=e.product,n=c.name,o=c.pictures,i=c.discount,s=c.price,l=c.subprice,u=e.onQuickViewOpenHandler,d=y.a.createElement("figure",{className:"image product-card__figure "},y.a.createElement("img",{className:"product-card__image",src:o[0],alt:"product"}),y.a.createElement("div",{className:" is-overlay product-card__figure-overlay"},y.a.createElement("div",{className:"product-card__overlay-actions"},y.a.createElement("button",{className:"button is-primary is-inverted product-card__figure-overlay-button",onClick:function(e){return function(e){e.preventDefault(),u()}(e)}},y.a.createElement(_.Icon,{icon:k.eye})))),0!==i?y.a.createElement(O,{discount:i}):null);return a&&(d=y.a.createElement("figure",{className:"image product-card__figure "},y.a.createElement("img",{className:"product-card__image",src:o[0],alt:"product"}),y.a.createElement("div",{className:" is-overlay product-card__figure-overlay"},y.a.createElement("div",{className:"product-card__overlay-actions"},y.a.createElement("label",{className:"button is-primary is-inverted product-card__figure-overlay-button"},y.a.createElement(_.Icon,{icon:w.circleRight})))),0!==i?y.a.createElement(O,{discount:i}):null)),y.a.createElement("div",{className:"card product-card ".concat(r)},y.a.createElement("div",{className:"card-image product-card__image-holder"},d),y.a.createElement("div",{className:"card-content product-card__info"},y.a.createElement("header",null,y.a.createElement("label",{className:"title is-size-5 product-card__name has-text-centered has-text-white"},n)),y.a.createElement("div",{className:"columns is-centered"},y.a.createElement("div",{className:"column is-4-touch is-6 has-text-centered has-text-danger has-text-weight-semibold product-card__price"},"".concat(l," ").concat(s," ₽")))),t||y.a.createElement("footer",{className:"product-card__actions"}))},C=(a(132),function(e){var t=e.product,a=t.name,r=t.price,c=t.pictures;return y.a.createElement("div",{className:"columns level"},y.a.createElement("div",{className:"column is-5"},y.a.createElement("div",{className:"product-preview-modal__image-holder"},y.a.createElement("img",{className:"product-preview-modal__image",src:c[0],alt:""}))),y.a.createElement("div",{className:"column is-7"},y.a.createElement("header",{className:"product-preview-modal__product-header"},y.a.createElement("h2",{className:"title"},a)),y.a.createElement("span",{className:"is-block has-text-danger is-size-5-touch is-size-4-desktop has-text-weight-semibold product-preview-modal__product-price"},"".concat(r," ₽"))))}),x=a(137),S=(a(133),function(e){var t=e.children,a=e.isModalActive,r=e.onCloseClick;return y.a.createElement(x.a,{in:a,timeout:300,classNames:"slide-up",unmountOnExit:!0,mountOnEnter:!0},y.a.createElement("div",{className:"is-overlay blank-modal__overlay"},y.a.createElement("div",{className:"blank-modal"},t,y.a.createElement("button",{className:"delete is-large blank-modal__close","aria-label":"close",onClick:r}))))}),j=a(26),A=a(101),D=function(e){var t=e.type,a=void 0===t?"is-danger":t,r=e.message,c=e.onCloseHandler;return y.a.createElement("div",{className:"notification has-text-centered ".concat(a)},y.a.createElement("button",{className:"delete",onClick:function(){return c()}}),r)};function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=f()(e);if(t){var c=f()(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return m()(this,a)}}var R=function(e){u()(a,e);var t=M(a);function a(){var e;c()(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),h()(s()(e),"state",{categoryName:"",productsInCategory:[],currentProduct:"",isModalActive:!1,isLoading:!0,error:""}),h()(s()(e),"showProductPreview",(function(t){var a=e.state.productsInCategory.find((function(e){return e._id===t}));e.setState({currentProduct:a,isModalActive:!0})})),h()(s()(e),"closeProductPreview",(function(){e.setState({isModalActive:!1})})),h()(s()(e),"alertCloseHandler",(function(){e.setState({error:!1})})),e}return o()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.categoryName;A.b.where("category","==",t).get().then((function(a){var r=[];a.docs.map((function(e){return r.push(L({_id:e.id},e.data()))})),e.setState({categoryName:t,productsInCategory:r,isLoading:!1})})).catch((function(){return e.setState({isLoading:!1,error:!0})}))}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.match.params.categoryName,r=e.match.params.categoryName;a!==r&&(this.setState({isLoading:!0}),A.b.where("category","==",a).get().then((function(e){var r=[];e.docs.map((function(e){return r.push(L({_id:e.id},e.data()))})),t.setState({categoryName:a,productsInCategory:r,isLoading:!1})})).catch((function(){return t.setState({isLoading:!1,error:!0})})))}},{key:"componentWillUnmount",value:function(){this.setState({categoryName:"",productsInCategory:[],currentProduct:"",isModalActive:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.categoryName,r=t.isModalActive,c=t.currentProduct,n=t.productsInCategory,o=t.error,i=t.isLoading,s=n.map((function(t){return t.isActive?y.a.createElement("div",{key:t._id,className:"column is-4-tablet is-3-widescreen "},y.a.createElement(P,{additionalClasses:"has-background-black-ter",product:t,onQuickViewOpenHandler:function(){return e.showProductPreview(t._id)}})):null}));return y.a.createElement("section",{className:"section"},y.a.createElement("div",{className:"container"},y.a.createElement(N,{title:a}),o?y.a.createElement(D,{message:"Проблема с сетью, попробуйте перезагрузить страницу.",onCloseHandler:this.alertCloseHandler}):i?y.a.createElement("div",{className:"loader-wrapper"},y.a.createElement(j.a,null)):y.a.createElement(g.Fragment,null,y.a.createElement("div",{className:"columns is-multiline"},s),y.a.createElement(S,{isModalActive:r,onCloseClick:this.closeProductPreview},y.a.createElement(C,{product:L({},c)})))))}}]),a}(g.Component);t.default=Object(E.f)(R)}}]);